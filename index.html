<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ•™è‚²ç¾å ´ã®ãŸã‚ã®è‘—ä½œæ¨©ã‚»ãƒ«ãƒ•ãƒã‚§ãƒƒã‚«ãƒ¼</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap');
        body {
            font-family: 'Noto Sans JP', sans-serif;
            background-color: #f1f5f9;
        }
        .step-card {
            display: none;
        }
        .step-card.active {
            display: block;
        }
        .result-box {
            border-left: 6px solid #ef4444;
        }
        .suggestion-box {
            background-color: #f0f9ff;
            border-left: 6px solid #0ea5e9;
        }
        input, select, textarea {
            border: 1px solid #cbd5e1;
        }
    </style>
</head>
<body class="p-4 md:p-8">

    <div class="max-w-4xl mx-auto">
        <!-- Header -->
        <header class="text-center mb-8">
            <h1 class="text-3xl font-bold text-slate-800 mb-2">è‘—ä½œæ¨©ã‚»ãƒ«ãƒ•ãƒã‚§ãƒƒã‚«ãƒ¼</h1>
            <p class="text-slate-600">æˆæ¥­ã§ã®è‘—ä½œç‰©åˆ©ç”¨ã«é–¢ã™ã‚‹æ³•çš„åˆ¤æ–­ã¨å‡ºå…¸ä½œæˆã‚’ã‚µãƒãƒ¼ãƒˆã—ã¾ã™</p>
        </header>

        <!-- Main Content -->
        <main class="bg-white rounded-2xl shadow-xl overflow-hidden">
            
            <!-- Navigation Tabs -->
            <div class="flex border-b">
                <button onclick="switchTab('checker')" id="tab-checker" class="flex-1 py-4 text-center font-bold text-blue-600 border-b-2 border-blue-600 bg-blue-50 transition">
                    è‘—ä½œæ¨©è¨ºæ–­
                </button>
                <button onclick="switchTab('generator')" id="tab-generator" class="flex-1 py-4 text-center font-bold text-slate-500 hover:bg-slate-50 transition">
                    å‚è€ƒæ–‡çŒ®ä½œæˆ
                </button>
            </div>

            <!-- TAB 1: Diagnostic Checker -->
            <div id="content-checker" class="p-6 md:p-10">
                
                <div id="quiz-container">
                    <!-- Progress Bar (Initially hidden) -->
                    <div id="progress-container" class="w-full bg-slate-100 h-2 rounded-full mb-8 hidden">
                        <div id="progress-bar" class="bg-blue-500 h-2 rounded-full transition-all duration-300" style="width: 0%"></div>
                    </div>

                    <!-- Step 0: Disclaimer & Reference (Flow Start) -->
                    <div id="step0" class="step-card active">
                        <div class="mb-6">
                            <h2 class="text-xl font-bold mb-4 text-slate-800 border-b pb-2">ä½¿ç”¨æ–‡çŒ®ã¨å…è²¬äº‹é …</h2>
                            <div class="bg-slate-50 p-5 rounded-lg text-sm text-slate-700 leading-relaxed space-y-4 h-64 overflow-y-auto border border-slate-200">
                                <section>
                                    <h3 class="font-bold text-slate-900 mb-1">ã€æœ¬ã‚¢ãƒ—ãƒªã®æ ¹æ‹ ãƒ»ä½¿ç”¨æ–‡çŒ®ã€‘</h3>
                                    <ul class="list-disc ml-5 space-y-1">
                                        <li>è‘—ä½œæ¨©æ³•ï¼ˆæ˜­å’Œå››åäº”å¹´æ³•å¾‹ç¬¬å››åå…«å·ï¼‰ç¬¬35æ¡</li>
                                        <li>ä¸€èˆ¬ç¤¾å›£æ³•äººæˆæ¥­ç›®çš„å…¬è¡†é€ä¿¡è£œå„Ÿé‡‘ç­‰ç®¡ç†å”ä¼šï¼ˆSARTRASï¼‰ã€Œæ”¹æ­£è‘—ä½œæ¨©æ³•ç¬¬35æ¡é‹ç”¨æŒ‡é‡ã€</li>
                                        <li>æ–‡éƒ¨ç§‘å­¦çœã€Œå­¦æ ¡æ•™è‚²ã«ãŠã‘ã‚‹è‘—ä½œæ¨©ã®å–æ‰±ã„ã€ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³</li>
                                    </ul>
                                </section>
                                <section>
                                    <h3 class="font-bold text-slate-900 mb-1">ã€å…è²¬äº‹é …ã€‘</h3>
                                    <p>æœ¬ã‚¢ãƒ—ãƒªã¯ã€æ•™è‚²ç¾å ´ã«ãŠã‘ã‚‹è‘—ä½œç‰©åˆ©ç”¨ã®ä¸€èˆ¬çš„ãªåˆ¤æ–­æŒ‡æ¨™ã‚’æä¾›ã™ã‚‹ã‚‚ã®ã§ã‚ã‚Šã€å€‹åˆ¥ã®ã‚±ãƒ¼ã‚¹ã«ãŠã‘ã‚‹å®Œå…¨ãªé©æ³•æ€§ã‚’ä¿è¨¼ã™ã‚‹ã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</p>
                                    <p>åˆ©ç”¨ã«ã‚ˆã£ã¦ç”Ÿã˜ãŸæå®³ã«ã¤ã„ã¦ã€é–‹ç™ºè€…ã¯ä¸€åˆ‡ã®è²¬ä»»ã‚’è² ã„ã‹ã­ã¾ã™ã€‚ç‰¹ã«é‡è¦ãªåˆ¤æ–­ãŒå¿…è¦ãªå ´åˆã¯ã€æ‰€å±æ©Ÿé–¢ã®æ³•å‹™æ‹…å½“éƒ¨ç½²ã¾ãŸã¯å¼è­·å£«ç­‰ã®å°‚é–€å®¶ã«ã”ç›¸è«‡ãã ã•ã„ã€‚</p>
                                </section>
                            </div>
                        </div>
                        <button onclick="startDiagnostic()" class="w-full py-4 bg-blue-600 text-white font-bold rounded-xl hover:bg-blue-700 transition shadow-lg shadow-blue-100">
                            å†…å®¹ã‚’ç¢ºèªã—ã€è¨ºæ–­ã‚’é–‹å§‹ã™ã‚‹
                        </button>
                    </div>

                    <!-- Question 1 -->
                    <div id="step1" class="step-card">
                        <div class="mb-2 text-blue-600 font-bold">Step 1: åˆ©ç”¨ä¸»ä½“ã®ç¢ºèª</div>
                        <h2 class="text-xl font-bold mb-6 text-slate-800">ã‚ãªãŸã¯ã€Œæ•™è‚²æ©Ÿé–¢ã®æ•™è·å“¡ã€ã¾ãŸã¯ã€Œæˆæ¥­ã‚’å—ã‘ã‚‹å…ç«¥ãƒ»ç”Ÿå¾’ãƒ»å­¦ç”Ÿã€ã§ã™ã‹ï¼Ÿ</h2>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <button onclick="nextStep(1, 'yes')" class="p-5 border-2 border-slate-200 rounded-xl transition text-left">
                                <span class="font-bold text-lg block mb-1">ã¯ã„</span>
                                <span class="text-sm text-slate-500">å­¦æ ¡ï¼ˆå°ãƒ»ä¸­ãƒ»é«˜ãƒ»å¤§ãªã©ï¼‰ã®æ§‹æˆå“¡ã§ã™</span>
                            </button>
                            <button onclick="showResult('warning', 'è‘—ä½œæ¨©æ³•ç¬¬35æ¡ã®å¯¾è±¡å¤–ã§ã™ã€‚', 'å–¶åˆ©ç›®çš„ã®å¡¾ã€ã‚«ãƒ«ãƒãƒ£ãƒ¼ã‚¹ã‚¯ãƒ¼ãƒ«ã€å€‹äººã«ã‚ˆã‚‹è§£èª¬å‹•ç”»ãªã©ã¯ã€æ•™è‚²æ©Ÿé–¢ã«ã¯å«ã¾ã‚Œã¾ã›ã‚“ã€‚åŸå‰‡ã¨ã—ã¦è‘—ä½œæ¨©è€…ã®ã€Œè¨±è«¾ã€ãŒå¿…è¦ã§ã™ã€‚')" class="p-5 border-2 border-slate-200 rounded-xl transition text-left">
                                <span class="font-bold text-lg block mb-1">ã„ã„ãˆ</span>
                                <span class="text-sm text-slate-500">ä¸€èˆ¬ä¼æ¥­ã€å¡¾ã€å€‹äººã®æ´»å‹•ãªã©</span>
                            </button>
                        </div>
                    </div>

                    <!-- Question 2 -->
                    <div id="step2" class="step-card">
                        <div class="mb-2 text-blue-600 font-bold">Step 2: åˆ©ç”¨ç›®çš„ã®ç¢ºèª</div>
                        <h2 class="text-xl font-bold mb-6 text-slate-800">ãã®åˆ©ç”¨ã¯ã€Œæˆæ¥­ã®éç¨‹ã€ã§è¡Œã‚ã‚Œã‚‹ã‚‚ã®ã§ã™ã‹ï¼Ÿ</h2>
                        <p class="text-sm text-slate-500 mb-4 italic">â€»é€šå¸¸ã®æˆæ¥­ã®ã»ã‹ã€éƒ¨æ´»å‹•ã€å­¦æ ¡è¡Œäº‹ã€ã‚¼ãƒŸã€æ•™è·å“¡ä¼šè­°ç­‰ã‚‚å«ã¿ã¾ã™ã€‚</p>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <button onclick="nextStep(2, 'yes')" class="p-5 border-2 border-slate-200 rounded-xl transition text-left">
                                <span class="font-bold text-lg block mb-1">ã¯ã„</span>
                                <span class="text-sm text-slate-500">æˆæ¥­å†…ã§ã®é…å¸ƒã€æŠ•å½±ã€LMSã¸ã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ç­‰</span>
                            </button>
                            <button onclick="showResult('warning', '35æ¡ã®ä¾‹å¤–é©ç”¨ã¯å—ã‘ã‚‰ã‚Œã¾ã›ã‚“ã€‚', 'å­¦æ ¡HPã¸ã®æ²è¼‰ã€ã‚ªãƒ¼ãƒ—ãƒ³ã‚­ãƒ£ãƒ³ãƒ‘ã‚¹ã§ã®å…¬é–‹é…å¸ƒã€å¯¾å¤–çš„ãªåºƒå ±èªŒã¸ã®æ²è¼‰ã¯ã€Œæˆæ¥­ã®éç¨‹ã€ã¨ã¯ã¿ãªã•ã‚Œã¾ã›ã‚“ã€‚åˆ¥é€”è¨±è«¾ãŒå¿…è¦ã§ã™ã€‚')" class="p-5 border-2 border-slate-200 rounded-xl transition text-left">
                                <span class="font-bold text-lg block mb-1">ã„ã„ãˆ</span>
                                <span class="text-sm text-slate-500">å­¦æ ¡HPæ²è¼‰ã€åºƒå ±æ´»å‹•ã€åœ°åŸŸäº¤æµä¼šãªã©</span>
                            </button>
                        </div>
                    </div>

                    <!-- Question 3 -->
                    <div id="step3" class="step-card">
                        <div class="mb-2 text-blue-600 font-bold">Step 3: è³‡æ–™ã®æ€§è³ª</div>
                        <h2 class="text-xl font-bold mb-6 text-slate-800">ä½¿ç”¨ã™ã‚‹è³‡æ–™ã¯ã€å¸‚è²©ã®ãƒ‰ãƒªãƒ«ã€ãƒ¯ãƒ¼ã‚¯ãƒ–ãƒƒã‚¯ã€ãƒ†ã‚¹ãƒˆå•é¡Œé›†ã€ã¾ãŸã¯æ¥½è­œã§ã™ã‹ï¼Ÿ</h2>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <button onclick="showResult('critical', 'è‘—ä½œæ¨©è€…ã®åˆ©ç›Šã‚’ä¸å½“ã«å®³ã™ã‚‹æã‚ŒãŒé«˜ã„ã§ã™ã€‚', 'ãƒ‰ãƒªãƒ«ç­‰ã®æ¶ˆè€—å“ã¯ã€Œä¸€äººä¸€äººãŒè³¼å…¥ã™ã‚‹ã“ã¨ã€ã‚’å‰æã«è²©å£²ã•ã‚Œã¦ã„ã¾ã™ã€‚ä¸€éƒ¨ã§ã‚ã£ã¦ã‚‚ã‚³ãƒ”ãƒ¼é…å¸ƒã¯è²©å£²æ©Ÿä¼šã‚’æãªã†ãŸã‚ã€æ³•35æ¡ã§ã‚‚èªã‚ã‚‰ã‚Œãªã„å¯èƒ½æ€§ãŒæ¥µã‚ã¦é«˜ã„ã§ã™ã€‚åŸå‰‡ã€å…¨å“¡åˆ†ã‚’è³¼å…¥ã—ã¦ãã ã•ã„ã€‚')" class="p-5 border-2 border-slate-200 rounded-xl transition text-left">
                                <span class="font-bold text-lg block mb-1">ã¯ã„</span>
                                <span class="text-sm text-slate-500">å¸‚è²©ã®æ•™æãƒ»æ¥½è­œãªã©</span>
                            </button>
                            <button onclick="nextStep(3, 'yes')" class="p-5 border-2 border-slate-200 rounded-xl transition text-left">
                                <span class="font-bold text-lg block mb-1">ã„ã„ãˆ</span>
                                <span class="text-sm text-slate-500">æ–°èè¨˜äº‹ã€ä¸€èˆ¬æ›¸ç±ã®ä¸€éƒ¨ã€Webè¨˜äº‹ã€å†™çœŸãªã©</span>
                            </button>
                        </div>
                    </div>

                    <!-- Question 4 -->
                    <div id="step4" class="step-card">
                        <div class="mb-2 text-blue-600 font-bold">Step 4: åˆ†é‡ã®ç¢ºèª</div>
                        <h2 class="text-xl font-bold mb-6 text-slate-800">åˆ©ç”¨ã™ã‚‹ç¯„å›²ã¯ã€è‘—ä½œç‰©ã®ã€Œå¿…è¦æœ€å°é™ï¼ˆä¸€éƒ¨åˆ†ï¼‰ã€ã§ã™ã‹ï¼Ÿ</h2>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <button onclick="showResult('success', 'æ³•35æ¡ã®ç¯„å›²å†…ã§åˆ©ç”¨å¯èƒ½ã§ã™ã€‚', 'å¿…è¦æœ€å°é™ã®è¤‡è£½ãƒ»å…¬è¡†é€ä¿¡ï¼ˆICTæ´»ç”¨ï¼‰ã¯ç„¡è¨±è«¾ã§å¯èƒ½ã§ã™ã€‚ãŸã ã—ã€å¿…ãšã€Œå‡ºå…¸ï¼ˆå‚è€ƒæ–‡çŒ®ï¼‰ã€ã‚’æ˜è¨˜ã—ã¦ãã ã•ã„ã€‚ã¾ãŸã€ICTæ´»ç”¨ï¼ˆLMSé€ä¿¡ç­‰ï¼‰ã®å ´åˆã¯SARTRASã¸ã®è£œå„Ÿé‡‘æ”¯æ‰•ã„ãŒå­¦æ ¡å˜ä½ã§å¿…è¦ã§ã™ãŒã€å€‹åˆ¥ã®è¨±è«¾ã¯ä¸è¦ã§ã™ã€‚')" class="p-5 border-2 border-slate-200 rounded-xl transition text-left">
                                <span class="font-bold text-lg block mb-1">ã¯ã„ï¼ˆä¸€éƒ¨åˆ†ã®ã¿ï¼‰</span>
                                <span class="text-sm text-slate-500">ä¾‹ï¼šæœ¬ã®æ•°ãƒšãƒ¼ã‚¸ã€è¨˜äº‹ã®ä¸€éƒ¨ãªã©</span>
                            </button>
                            <button onclick="showResult('warning', 'ã€Œå…¨éƒ¨ã€ã®è¤‡è£½ã¯æ…é‡ãªåˆ¤æ–­ãŒå¿…è¦ã§ã™ã€‚', 'ä¿³å¥ã€å†™çœŸã€çŸ­ç·¨è©©ãªã©ã€ãã®æ€§è³ªä¸Šã€Œå…¨éƒ¨ã€ä½¿ã‚ãªã„ã¨æ„å‘³ã‚’ãªã•ãªã„ã‚‚ã®ã¯èªã‚ã‚‰ã‚Œã¾ã™ãŒã€1å†Šã®æœ¬ã‚’ä¸¸ã”ã¨ã‚³ãƒ”ãƒ¼ã™ã‚‹ã“ã¨ã¯ã€Œå¿…è¦é™åº¦ã€ã‚’è¶…ãˆã€è‘—ä½œæ¨©è€…ã®åˆ©ç›Šã‚’å®³ã™ã‚‹ãŸã‚èªã‚ã‚‰ã‚Œã¾ã›ã‚“ã€‚')" class="p-5 border-2 border-slate-200 rounded-xl transition text-left">
                                <span class="font-bold text-lg block mb-1">ã„ã„ãˆï¼ˆå…¨éƒ¨ã¾ãŸã¯å¤§éƒ¨åˆ†ï¼‰</span>
                                <span class="text-sm text-slate-500">1å†Šä¸¸ã”ã¨ã€é›‘èªŒ1å·åˆ†å…¨ã¦ãªã©</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Result Area -->
                <div id="result-container" class="hidden">
                    <div id="result-alert" class="result-box bg-red-50 p-6 rounded-xl mb-6">
                        <h3 class="font-bold text-red-800 mb-2 text-xl" id="result-title">è¦æ³¨æ„</h3>
                        <p id="result-text" class="text-red-700 leading-relaxed"></p>
                    </div>
                    <div class="suggestion-box p-6 rounded-xl mb-8">
                        <h4 class="font-bold text-blue-800 mb-2">ğŸ’¡ å…·ä½“çš„ãªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚¢ãƒ‰ãƒã‚¤ã‚¹</h4>
                        <p id="suggestion-text" class="text-blue-700 leading-relaxed"></p>
                    </div>
                    <div class="flex flex-col md:flex-row gap-4">
                        <button onclick="resetChecker()" class="flex-1 py-4 bg-slate-800 text-white font-bold rounded-xl hover:bg-slate-700 transition">
                            ã‚‚ã†ä¸€åº¦è¨ºæ–­ã™ã‚‹
                        </button>
                        <button onclick="switchTab('generator')" class="flex-1 py-4 bg-blue-600 text-white font-bold rounded-xl hover:bg-blue-700 transition">
                            å‡ºå…¸ï¼ˆå‚è€ƒæ–‡çŒ®ï¼‰ã‚’ä½œæˆã™ã‚‹
                        </button>
                    </div>
                </div>

            </div>

            <!-- TAB 2: Reference Generator -->
            <div id="content-generator" class="hidden p-6 md:p-10">
                <h2 class="text-2xl font-bold mb-6 text-slate-800">å‚è€ƒæ–‡çŒ®ä½œæˆãƒ„ãƒ¼ãƒ«</h2>
                
                <div class="bg-slate-50 p-6 rounded-xl mb-8 border border-slate-200">
                    <div class="mb-6">
                        <label class="block text-sm font-bold text-slate-700 mb-3">æ–‡çŒ®ã‚¿ã‚¤ãƒ—ã‚’é¸æŠã—ã¦ãã ã•ã„</label>
                        <div class="flex gap-6">
                            <label class="flex items-center space-x-2 cursor-pointer">
                                <input type="radio" name="refType" value="book" checked onchange="toggleRefFields()" class="w-5 h-5 text-blue-600">
                                <span class="font-medium">æ›¸ç±ãƒ»è«–æ–‡</span>
                            </label>
                            <label class="flex items-center space-x-2 cursor-pointer">
                                <input type="radio" name="refType" value="web" onchange="toggleRefFields()" class="w-5 h-5 text-blue-600">
                                <span class="font-medium">Webã‚µã‚¤ãƒˆãƒ»è¨˜äº‹</span>
                            </label>
                        </div>
                    </div>

                    <div id="ref-form" class="space-y-4">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="md:col-span-2">
                                <label class="block text-xs font-bold text-slate-500 uppercase mb-1">ã‚¿ã‚¤ãƒˆãƒ«ï¼ˆå¿…é ˆï¼‰</label>
                                <input type="text" id="ref-title" placeholder="ä¾‹ï¼šè‘—ä½œæ¨©æ³•ã¨æ•™è‚²ã®æœªæ¥" class="w-full p-3 rounded-lg outline-none focus:border-blue-500">
                            </div>
                            <div>
                                <label class="block text-xs font-bold text-slate-500 uppercase mb-1">è‘—è€…å</label>
                                <input type="text" id="ref-author" placeholder="ä¾‹ï¼šå±±ç”° å¤ªéƒ" class="w-full p-3 rounded-lg outline-none focus:border-blue-500">
                            </div>
                            <div id="fields-book-publisher">
                                <label class="block text-xs font-bold text-slate-500 uppercase mb-1">å‡ºç‰ˆç¤¾</label>
                                <input type="text" id="ref-publisher" placeholder="ä¾‹ï¼šå­¦è¡“å‡ºç‰ˆ" class="w-full p-3 rounded-lg outline-none focus:border-blue-500">
                            </div>
                            <div id="fields-book-year">
                                <label class="block text-xs font-bold text-slate-500 uppercase mb-1">å‡ºç‰ˆå¹´ï¼ˆè¥¿æš¦ï¼‰</label>
                                <input type="text" id="ref-year" placeholder="ä¾‹ï¼š2024" class="w-full p-3 rounded-lg outline-none focus:border-blue-500">
                            </div>
                            <div id="fields-book-page">
                                <label class="block text-xs font-bold text-slate-500 uppercase mb-1">å¼•ç”¨ãƒšãƒ¼ã‚¸</label>
                                <input type="text" id="ref-page" placeholder="ä¾‹ï¼špp.45-50" class="w-full p-3 rounded-lg outline-none focus:border-blue-500">
                            </div>
                        </div>

                        <!-- Web Specific -->
                        <div id="fields-web" class="hidden space-y-4">
                            <div>
                                <label class="block text-xs font-bold text-slate-500 uppercase mb-1">URL</label>
                                <input type="text" id="ref-url" placeholder="https://example.com/article" class="w-full p-3 rounded-lg outline-none focus:border-blue-500">
                            </div>
                            <div>
                                <label class="block text-xs font-bold text-slate-500 uppercase mb-1">ã‚µã‚¤ãƒˆå</label>
                                <input type="text" id="ref-site-name" placeholder="ä¾‹ï¼šæ–‡éƒ¨ç§‘å­¦çœWebã‚µã‚¤ãƒˆ" class="w-full p-3 rounded-lg outline-none focus:border-blue-500">
                            </div>
                            <div>
                                <label class="block text-xs font-bold text-slate-500 uppercase mb-1">æœ€çµ‚é–²è¦§æ—¥</label>
                                <input type="date" id="ref-access-date" class="w-full p-3 rounded-lg outline-none focus:border-blue-500">
                            </div>
                        </div>

                        <button onclick="generateReference()" class="w-full py-4 bg-blue-600 text-white font-bold rounded-xl hover:bg-blue-700 transition shadow-lg shadow-blue-200">
                            å‚è€ƒæ–‡çŒ®ãƒ†ã‚­ã‚¹ãƒˆã‚’ä½œæˆ
                        </button>
                    </div>
                </div>

                <!-- Result Output -->
                <div id="ref-output-container" class="hidden">
                    <label class="block text-sm font-bold text-slate-700 mb-2">ã‚³ãƒ”ãƒ¼ã—ã¦è³‡æ–™ã«è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„ï¼š</label>
                    <div class="relative">
                        <textarea id="ref-result-text" readonly class="w-full p-5 bg-white border-2 border-blue-100 rounded-xl text-slate-800 font-mono text-sm min-h-[120px] focus:outline-none"></textarea>
                        <button onclick="copyToClipboard()" class="absolute top-3 right-3 px-4 py-2 bg-blue-50 text-blue-700 border border-blue-200 rounded-lg hover:bg-blue-100 font-bold transition">
                            ã‚³ãƒ”ãƒ¼
                        </button>
                    </div>
                    <p id="copy-msg" class="text-green-600 font-bold text-sm mt-3 hidden text-center">âœ… ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ</p>
                </div>
            </div>
        </main>

        <footer class="mt-12 text-center text-slate-500 text-sm pb-10">
            <p class="mb-2 font-bold italic text-slate-400">Copyright &copy; 2026 è‘—ä½œæ¨©ã‚»ãƒ«ãƒ•ãƒã‚§ãƒƒã‚«ãƒ¼ Project</p>
        </footer>
    </div>

    <script>
        // Tab Management
        function switchTab(tab) {
            const checkerBtn = document.getElementById('tab-checker');
            const generatorBtn = document.getElementById('tab-generator');
            const checkerContent = document.getElementById('content-checker');
            const generatorContent = document.getElementById('content-generator');

            if (tab === 'checker') {
                checkerBtn.className = "flex-1 py-4 text-center font-bold text-blue-600 border-b-2 border-blue-600 bg-blue-50 transition";
                generatorBtn.className = "flex-1 py-4 text-center font-bold text-slate-500 hover:bg-slate-50 transition";
                checkerContent.classList.remove('hidden');
                generatorContent.classList.add('hidden');
            } else {
                generatorBtn.className = "flex-1 py-4 text-center font-bold text-blue-600 border-b-2 border-blue-600 bg-blue-50 transition";
                checkerBtn.className = "flex-1 py-4 text-center font-bold text-slate-500 hover:bg-slate-50 transition";
                generatorContent.classList.remove('hidden');
                checkerContent.classList.add('hidden');
            }
        }

        // Diagnostic Logic
        function startDiagnostic() {
            document.getElementById('step0').classList.remove('active');
            document.getElementById('step1').classList.add('active');
            document.getElementById('progress-container').classList.remove('hidden');
            document.getElementById('progress-bar').style.width = `25%`;
        }

        function nextStep(current, choice) {
            const currentStep = document.getElementById(`step${current}`);
            if (currentStep) {
                currentStep.classList.remove('active');
            }
            
            const next = current + 1;
            const nextStep = document.getElementById(`step${next}`);
            if (nextStep) {
                nextStep.classList.add('active');
                const progress = (next / 4) * 100;
                document.getElementById('progress-bar').style.width = `${progress}%`;
            }
        }

        function showResult(type, mainText, suggestionText) {
            document.getElementById('quiz-container').classList.add('hidden');
            const resContainer = document.getElementById('result-container');
            resContainer.classList.remove('hidden');
            
            const alertBox = document.getElementById('result-alert');
            const title = document.getElementById('result-title');
            
            if (type === 'success') {
                alertBox.className = 'result-box bg-green-50 border-green-500 p-6 rounded-xl mb-6';
                title.innerText = 'åˆ©ç”¨OKï¼ˆæ¡ä»¶ä»˜ãï¼‰';
                title.className = 'font-bold text-green-800 mb-2 text-xl';
            } else if (type === 'warning') {
                alertBox.className = 'result-box bg-orange-50 border-orange-500 p-6 rounded-xl mb-6';
                title.innerText = 'åˆ¤æ–­ã«æ³¨æ„ãŒå¿…è¦ã§ã™';
                title.className = 'font-bold text-orange-800 mb-2 text-xl';
            } else {
                alertBox.className = 'result-box bg-red-50 border-red-500 p-6 rounded-xl mb-6';
                title.innerText = 'åˆ©ç”¨ä¸å¯ã®å¯èƒ½æ€§ãŒé«˜ã„ã§ã™';
                title.className = 'font-bold text-red-800 mb-2 text-xl';
            }
            
            document.getElementById('result-text').innerText = mainText;
            document.getElementById('suggestion-text').innerText = suggestionText;
        }

        function resetChecker() {
            document.getElementById('quiz-container').classList.remove('hidden');
            document.getElementById('result-container').classList.add('hidden');
            document.getElementById('progress-container').classList.add('hidden');
            
            const steps = document.querySelectorAll('.step-card');
            steps.forEach(s => s.classList.remove('active'));
            document.getElementById('step0').classList.add('active');
            document.getElementById('progress-bar').style.width = '0%';
        }

        // Reference Generator Logic
        function toggleRefFields() {
            const type = document.querySelector('input[name="refType"]:checked').value;
            const bookP = document.getElementById('fields-book-publisher');
            const bookY = document.getElementById('fields-book-year');
            const bookPg = document.getElementById('fields-book-page');
            const webF = document.getElementById('fields-web');

            if (type === 'book') {
                bookP.classList.remove('hidden');
                bookY.classList.remove('hidden');
                bookPg.classList.remove('hidden');
                webF.classList.add('hidden');
            } else {
                bookP.classList.add('hidden');
                bookY.classList.add('hidden');
                bookPg.classList.add('hidden');
                webF.classList.remove('hidden');
            }
            document.getElementById('ref-output-container').classList.add('hidden');
        }

        function generateReference() {
            const type = document.querySelector('input[name="refType"]:checked').value;
            const title = document.getElementById('ref-title').value.trim();
            const author = document.getElementById('ref-author').value.trim();
            
            if (!title) {
                alert('ã‚¿ã‚¤ãƒˆãƒ«ã¯å¿…é ˆé …ç›®ã§ã™ã€‚');
                return;
            }

            let result = "";

            if (type === 'book') {
                const publisher = document.getElementById('ref-publisher').value.trim();
                const year = document.getElementById('ref-year').value.trim();
                const page = document.getElementById('ref-page').value.trim();
                
                result = `å‡ºå…¸ï¼š`;
                if (author) result += `${author} `;
                result += `ã€${title}ã€`;
                if (publisher) result += ` ${publisher}`;
                if (year) result += ` (${year})`;
                if (page) result += ` ${page}`;
            } else {
                const url = document.getElementById('ref-url').value.trim();
                const siteName = document.getElementById('ref-site-name').value.trim();
                const accessDate = document.getElementById('ref-access-date').value;
                
                result = `å‡ºå…¸ï¼š`;
                if (author) result += `${author}, `;
                result += `"${title}"`;
                if (siteName) result += `, ${siteName}`;
                if (url) result += `, <${url}>`;
                if (accessDate) {
                    const d = accessDate.split('-');
                    result += ` (${d[0]}å¹´${d[1]}æœˆ${d[2]}æ—¥ é–²è¦§)`;
                }
            }

            document.getElementById('ref-result-text').value = result;
            document.getElementById('ref-output-container').classList.remove('hidden');
            document.getElementById('copy-msg').classList.add('hidden');
        }

        function copyToClipboard() {
            const textArea = document.getElementById('ref-result-text');
            textArea.select();
            document.execCommand('copy');
            
            const msg = document.getElementById('copy-msg');
            msg.classList.remove('hidden');
        }

        // Set default access date for Web
        window.onload = () => {
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('ref-access-date').value = today;
        };
    </script>
</body>
</html>
