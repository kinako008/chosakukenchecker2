<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>教育現場のための著作権セルフチェッカー</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap');
        body {
            font-family: 'Noto Sans JP', sans-serif;
            background-color: #f8fafc;
        }
        .step-card {
            display: none;
        }
        .step-card.active {
            display: block;
            animation: fadeIn 0.4s ease-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .result-box {
            border-left: 6px solid #ef4444;
        }
        .suggestion-box {
            background-color: #f0f9ff;
            border-left: 6px solid #0ea5e9;
        }
    </style>
</head>
<body class="p-4 md:p-8">

    <div class="max-w-3xl mx-auto">
        <!-- Header -->
        <header class="text-center mb-8">
            <h1 class="text-2xl md:text-3xl font-bold text-slate-800 mb-2">著作権セルフチェッカー</h1>
            <p class="text-slate-600">授業での資料利用が著作権法に適合しているか確認しましょう</p>
        </header>

        <!-- Main Content -->
        <main class="bg-white rounded-2xl shadow-lg overflow-hidden">
            
            <!-- Navigation Tabs -->
            <div class="flex border-b">
                <button onclick="switchTab('checker')" id="tab-checker" class="flex-1 py-4 text-center font-bold text-blue-600 border-b-2 border-blue-600 bg-blue-50 transition">
                    著作権診断
                </button>
                <button onclick="switchTab('generator')" id="tab-generator" class="flex-1 py-4 text-center font-bold text-slate-500 hover:bg-slate-50 transition">
                    参考文献作成
                </button>
            </div>

            <!-- TAB 1: Diagnostic Checker -->
            <div id="content-checker" class="p-6 md:p-10">
                
                <div id="quiz-container">
                    <!-- Progress Bar -->
                    <div class="w-full bg-slate-100 h-2 rounded-full mb-8">
                        <div id="progress-bar" class="bg-blue-500 h-2 rounded-full transition-all duration-300" style="width: 25%"></div>
                    </div>

                    <!-- Question 1 -->
                    <div id="step1" class="step-card active">
                        <h2 class="text-xl font-bold mb-6 text-slate-800">Q1. あなたは"教員"または"授業を受ける生徒"ですか？</h2>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <button onclick="nextStep(1, 'yes')" class="p-4 border-2 border-slate-200 rounded-xl hover:border-blue-500 hover:bg-blue-50 transition text-left">
                                <span class="font-bold text-lg block mb-1">はい</span>
                                <span class="text-sm text-slate-500">学校の授業に関わっています</span>
                            </button>
                            <button onclick="showResult('warning', '原則「許諾」が必要です。', '転載可能なものか確認をしてください。')" class="p-4 border-2 border-slate-200 rounded-xl hover:border-red-500 hover:bg-red-50 transition text-left">
                                <span class="font-bold text-lg block mb-1">いいえ</span>
                                <span class="text-sm text-slate-500">教育目的以外の利用です</span>
                            </button>
                        </div>
                    </div>

                    <!-- Question 2 -->
                    <div id="step2" class="step-card">
                        <h2 class="text-xl font-bold mb-6 text-slate-800">Q2. 利用は"授業の過程"ですか？</h2>
                        <p class="text-sm text-slate-500 mb-4">※HR・学校行事も含みます</p>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <button onclick="nextStep(2, 'yes')" class="p-4 border-2 border-slate-200 rounded-xl hover:border-blue-500 hover:bg-blue-50 transition text-left">
                                <span class="font-bold text-lg block mb-1">はい</span>
                                <span class="text-sm text-slate-500">教室での授業やオンライン授業です</span>
                            </button>
                            <button onclick="showResult('warning', '学校広報やHP掲載などは別フローで追加の確認が必要です。', 'HPなどインターネットで配信の可能性がある場合は、著作者の利益を害さないか確認してください。')" class="p-4 border-2 border-slate-200 rounded-xl hover:border-red-500 hover:bg-red-50 transition text-left">
                                <span class="font-bold text-lg block mb-1">いいえ</span>
                                <span class="text-sm text-slate-500">学校HPへの掲載や広報誌など</span>
                            </button>
                        </div>
                    </div>

                    <!-- Question 3 -->
                    <div id="step3" class="step-card">
                        <h2 class="text-xl font-bold mb-6 text-slate-800">Q3. 使用する資料はHPで公開されている、もしくは出版されていますか？</h2>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <button onclick="nextStep(3, 'yes')" class="p-4 border-2 border-slate-200 rounded-xl hover:border-blue-500 hover:bg-blue-50 transition text-left">
                                <span class="font-bold text-lg block mb-1">はい</span>
                                <span class="text-sm text-slate-500">公表されている著作物です</span>
                            </button>
                            <button onclick="showResult('warning', '出所不明・違法入手の可能性あり。転載可能なものか確認を。', 'インターネットでも掲載可能な素材サイトの利用を検討してください。')" class="p-4 border-2 border-slate-200 rounded-xl hover:border-red-500 hover:bg-red-50 transition text-left">
                                <span class="font-bold text-lg block mb-1">いいえ</span>
                                <span class="text-sm text-slate-500">非公表の資料や入手経路が不明なもの</span>
                            </button>
                        </div>
                    </div>

                    <!-- Question 4 -->
                    <div id="step4" class="step-card">
                        <h2 class="text-xl font-bold mb-6 text-slate-800">Q4. 使用する資料はドリル・ワークブックなどの教材をコピーしたものですか？</h2>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <button onclick="showResult('critical', '原則使えません。教材品のコピー・配布は原則できません。', 'その教材を全生徒分購入しましょう。市販ドリル等のコピーは著作権者の利益を不当に害するため、35条の例外でも認められにくいです。')" class="p-4 border-2 border-slate-200 rounded-xl hover:border-red-500 hover:bg-red-50 transition text-left">
                                <span class="font-bold text-lg block mb-1">はい</span>
                                <span class="text-sm text-slate-500">市販のワークブックなど</span>
                            </button>
                            <button onclick="showResult('success', '利用可能です（教育利用の例外適用）', 'ただし、出典の明記は必須です。右側のタブから参考文献リストを作成しましょう。')" class="p-4 border-2 border-slate-200 rounded-xl hover:border-green-500 hover:bg-green-50 transition text-left">
                                <span class="font-bold text-lg block mb-1">いいえ</span>
                                <span class="text-sm text-slate-500">新聞記事、書籍の一部、Webサイトなど</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Result Area -->
                <div id="result-container" class="hidden">
                    <div id="result-alert" class="result-box bg-red-50 p-6 rounded-xl mb-6">
                        <h3 class="font-bold text-red-800 mb-2 text-lg" id="result-title">要注意</h3>
                        <p id="result-text" class="text-red-700"></p>
                    </div>
                    <div class="suggestion-box p-6 rounded-xl mb-8">
                        <h4 class="font-bold text-blue-800 mb-2">提案・アドバイス</h4>
                        <p id="suggestion-text" class="text-blue-700"></p>
                    </div>
                    <button onclick="resetChecker()" class="w-full py-4 bg-slate-800 text-white font-bold rounded-xl hover:bg-slate-700 transition">
                        最初からやり直す
                    </button>
                </div>

            </div>

            <!-- TAB 2: Reference Generator -->
            <div id="content-generator" class="hidden p-6 md:p-10">
                <h2 class="text-xl font-bold mb-6 text-slate-800">参考文献・引用文献の作成</h2>
                
                <div class="mb-6">
                    <label class="block text-sm font-bold text-slate-700 mb-2">文献タイプ</label>
                    <div class="flex gap-4">
                        <label class="flex items-center space-x-2 cursor-pointer">
                            <input type="radio" name="refType" value="book" checked onchange="toggleRefFields()" class="w-4 h-4 text-blue-600">
                            <span>書籍</span>
                        </label>
                        <label class="flex items-center space-x-2 cursor-pointer">
                            <input type="radio" name="refType" value="web" onchange="toggleRefFields()" class="w-4 h-4 text-blue-600">
                            <span>Webサイト</span>
                        </label>
                    </div>
                </div>

                <div id="ref-form" class="space-y-4">
                    <!-- Common Fields -->
                    <div>
                        <label class="block text-sm font-bold text-slate-700 mb-1">著者名</label>
                        <input type="text" id="ref-author" placeholder="例：山田 太郎" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none">
                    </div>
                    <div>
                        <label class="block text-sm font-bold text-slate-700 mb-1" id="label-title">書名（タイトル）</label>
                        <input type="text" id="ref-title" placeholder="例：著作権の基本" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none">
                    </div>

                    <!-- Book Specific -->
                    <div id="fields-book" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-bold text-slate-700 mb-1">出版社</label>
                            <input type="text" id="ref-publisher" placeholder="例：教育出版" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none">
                        </div>
                        <div>
                            <label class="block text-sm font-bold text-slate-700 mb-1">発行年（西暦）</label>
                            <input type="text" id="ref-year" placeholder="例：2023" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none">
                        </div>
                    </div>

                    <!-- Web Specific -->
                    <div id="fields-web" class="hidden space-y-4">
                        <div>
                            <label class="block text-sm font-bold text-slate-700 mb-1">URL</label>
                            <input type="text" id="ref-url" placeholder="https://..." class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none">
                        </div>
                        <div>
                            <label class="block text-sm font-bold text-slate-700 mb-1">閲覧日</label>
                            <input type="date" id="ref-access-date" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none">
                        </div>
                    </div>

                    <button onclick="generateReference()" class="w-full py-4 bg-blue-600 text-white font-bold rounded-xl hover:bg-blue-700 transition">
                        参考文献を生成
                    </button>
                </div>

                <!-- Result Output -->
                <div id="ref-output-container" class="mt-8 hidden">
                    <label class="block text-sm font-bold text-slate-700 mb-2">生成されたテキスト：</label>
                    <div class="relative">
                        <textarea id="ref-result-text" readonly class="w-full p-4 bg-slate-50 border-2 border-dashed border-slate-300 rounded-xl text-slate-700 min-h-[100px]"></textarea>
                        <button onclick="copyToClipboard()" class="absolute top-2 right-2 px-3 py-1 bg-white border rounded shadow-sm hover:bg-slate-100 text-xs font-bold">
                            コピー
                        </button>
                    </div>
                    <p id="copy-msg" class="text-green-600 text-xs mt-2 hidden">クリップボードにコピーしました！</p>
                </div>
            </div>
        </main>

        <footer class="mt-8 text-center text-slate-400 text-sm">
            <p>&copy; 2024 教育著作権チェックツール</p>
            <p class="mt-1">本ツールは一般的なガイドラインを示すものであり、法的な助言を保証するものではありません。</p>
        </footer>
    </div>

    <script>
        // Tab Management
        function switchTab(tab) {
            const checkerBtn = document.getElementById('tab-checker');
            const generatorBtn = document.getElementById('tab-generator');
            const checkerContent = document.getElementById('content-checker');
            const generatorContent = document.getElementById('content-generator');

            if (tab === 'checker') {
                checkerBtn.classList.add('text-blue-600', 'border-blue-600', 'bg-blue-50');
                checkerBtn.classList.remove('text-slate-500');
                generatorBtn.classList.add('text-slate-500');
                generatorBtn.classList.remove('text-blue-600', 'border-blue-600', 'bg-blue-50');
                
                checkerContent.classList.remove('hidden');
                generatorContent.classList.add('hidden');
            } else {
                generatorBtn.classList.add('text-blue-600', 'border-blue-600', 'bg-blue-50');
                generatorBtn.classList.remove('text-slate-500');
                checkerBtn.classList.add('text-slate-500');
                checkerBtn.classList.remove('text-blue-600', 'border-blue-600', 'bg-blue-50');
                
                generatorContent.classList.remove('hidden');
                checkerContent.classList.add('hidden');
            }
        }

        // Diagnostic Logic
        function nextStep(current, choice) {
            document.getElementById(`step${current}`).classList.remove('active');
            const next = current + 1;
            document.getElementById(`step${next}`).classList.add('active');
            
            const progress = (next / 4) * 100;
            document.getElementById('progress-bar').style.width = `${progress}%`;
        }

        function showResult(type, mainText, suggestionText) {
            document.getElementById('quiz-container').classList.add('hidden');
            const resContainer = document.getElementById('result-container');
            resContainer.classList.remove('hidden');
            
            const alertBox = document.getElementById('result-alert');
            const title = document.getElementById('result-title');
            
            if (type === 'success') {
                alertBox.className = 'result-box bg-green-50 border-green-500 p-6 rounded-xl mb-6';
                title.innerText = 'OK';
                title.className = 'font-bold text-green-800 mb-2 text-lg';
            } else if (type === 'warning') {
                alertBox.className = 'result-box bg-orange-50 border-orange-500 p-6 rounded-xl mb-6';
                title.innerText = '要注意';
                title.className = 'font-bold text-orange-800 mb-2 text-lg';
            } else {
                alertBox.className = 'result-box bg-red-50 border-red-500 p-6 rounded-xl mb-6';
                title.innerText = '原則利用不可';
                title.className = 'font-bold text-red-800 mb-2 text-lg';
            }
            
            document.getElementById('result-text').innerText = mainText;
            document.getElementById('suggestion-text').innerText = suggestionText;
        }

        function resetChecker() {
            document.getElementById('quiz-container').classList.remove('hidden');
            document.getElementById('result-container').classList.add('hidden');
            
            const steps = document.querySelectorAll('.step-card');
            steps.forEach(s => s.classList.remove('active'));
            document.getElementById('step1').classList.add('active');
            document.getElementById('progress-bar').style.width = '25%';
        }

        // Reference Generator Logic
        function toggleRefFields() {
            const type = document.querySelector('input[name="refType"]:checked').value;
            const bookFields = document.getElementById('fields-book');
            const webFields = document.getElementById('fields-web');
            const titleLabel = document.getElementById('label-title');

            if (type === 'book') {
                bookFields.classList.remove('hidden');
                webFields.classList.add('hidden');
                titleLabel.innerText = '書名';
            } else {
                bookFields.classList.add('hidden');
                webFields.classList.remove('hidden');
                titleLabel.innerText = 'ウェブサイトのタイトル / 記事タイトル';
            }
            document.getElementById('ref-output-container').classList.add('hidden');
        }

        function generateReference() {
            const type = document.querySelector('input[name="refType"]:checked').value;
            const author = document.getElementById('ref-author').value || '(著者不明)';
            const title = document.getElementById('ref-title').value || '(タイトル不明)';
            let result = "";

            if (type === 'book') {
                const publisher = document.getElementById('ref-publisher').value || '(出版社不明)';
                const year = document.getElementById('ref-year').value || '(発行年不明)';
                result = `${author}『${title}』${publisher}, ${year}.`;
            } else {
                const url = document.getElementById('ref-url').value || '(URL不明)';
                const accessDate = document.getElementById('ref-access-date').value || '';
                const formattedDate = accessDate ? `（参照 ${accessDate.replace(/-/g, '.')}）` : "";
                result = `${author}. "${title}." ${url}${formattedDate}`;
            }

            document.getElementById('ref-result-text').value = result;
            document.getElementById('ref-output-container').classList.remove('hidden');
        }

        function copyToClipboard() {
            const textArea = document.getElementById('ref-result-text');
            textArea.select();
            document.execCommand('copy');
            
            const msg = document.getElementById('copy-msg');
            msg.classList.remove('hidden');
            setTimeout(() => msg.classList.add('hidden'), 2000);
        }

        // Set default access date for Web
        window.onload = () => {
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('ref-access-date').value = today;
        };
    </script>
</body>
</html>
